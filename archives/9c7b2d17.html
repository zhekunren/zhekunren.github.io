<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/zhekunren/blog_image/img/theme/favicon.png">
  <title>RTX_RTOS之02-CMSIS_RTOS2_Reference自译中文版 | zhekunのblog</title>
  <meta name="author" content="zhekun" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="RTOS, RTX" />
  
  <meta property="og:type" content="article">
<meta property="og:title" content="RTX_RTOS之02-CMSIS_RTOS2_Reference自译中文版">
<meta property="og:url" content="https://zhekunren.github.io/archives/9c7b2d17.html">
<meta property="og:site_name" content="zhekunのblog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zhekunren.github.io/archives/9c7b2d17.htmlhttps:/cdn.jsdelivr.net/gh/zhekunren/blog_image/img/posts_covers/2022/covers_0123_7.jpg">
<meta property="article:published_time" content="2021-10-30T03:27:44.000Z">
<meta property="article:modified_time" content="2022-01-23T10:27:44.000Z">
<meta property="article:author" content="zhekun">
<meta property="article:tag" content="RTOS">
<meta property="article:tag" content="RTX">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhekunren.github.io/archives/9c7b2d17.htmlhttps:/cdn.jsdelivr.net/gh/zhekunren/blog_image/img/posts_covers/2022/covers_0123_7.jpg">
<meta name="twitter:site" content="@null">
  <link rel="alternate" href="atom.xml" type="application/atom+xml">
  <!-- 站点验证相关 -->
  
    
      <meta name="google-site-verification" content="3MUjsxLLUvsNMRZFuKgKTuODWqF7iUJhcAaKhiMrfGc" />
    
    
      <meta name="baidu-site-verification" content="code-xZCR5R9r7E" />
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://unpkg.com/nprogress@0.2.0/nprogress.css" type="text/css" media="all">
  
  
    <link rel="stylesheet" href="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.css">
  
  
    <link rel="stylesheet" href="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://unpkg.com/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner_1.jpg');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg_1.webp');
        }
      }
    
  </style>
  
  <!-- Google adsense -->
  
  <meta name="generator" content="Hexo 6.0.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-archive"></i>归档</a></li>
                                    
                                
                                    
                                        <li><a href="/categories/"><i class="fa fa-folder-open"></i>分类</a></li>
                                    
                                
                                    
                                        <li><a href="/tags/"><i class="fa fa-tags"></i>标签</a></li>
                                    
                                
                                    
                                        <li><a href="/about"><i class="fa fa-user"></i>关于</a></li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-link"></i>更多</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a href="/friends"><i class="fa fa-paw"></i>友链</a></li>
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://new.cnzz.com/v1/login.php?siteid=1280860084"><i class="fa fa-bar-chart"></i>访客</a></li>
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://travellings.link"><i class="fa fa-subway"></i>开往</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">zhekunのblog</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <!-- <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>zhekunのblog</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div> --> 
            <!-- 
                删除banner图片，delete by zhekun，此外替换以下文件中的"320px"为"50px"，共8处。
                themes\kratos-rebirth\source\css\kratosr.min.css,
                themes\kratos-rebirth\source\maps\kratosr.min.css.map,
                themes\kratos-rebirth\src\scss\kratosr.scss
            -->
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article>
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center">RTX_RTOS之02-CMSIS_RTOS2_Reference自译中文版</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><i class="fa fa-calendar"></i> 2021-10-30</li>
                <li><i class="fa fa-user"></i> 作者 zhekun</li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~16.92K
                    
                    字
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1642933664000"></time> 前，其中的内容可能需要更新。</p></div>   
            </div>
            
                <div class="kratos-post-inner-toc">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CMSIS-RTOS-API-v2"><span class="toc-text">CMSIS-RTOS API v2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-text">内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D"><span class="toc-text">自动动态分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E7%94%A8%E6%88%B7%E5%AE%9A%E4%B9%89%E5%88%86%E9%85%8D"><span class="toc-text">手动用户定义分配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E4%BF%A1%E6%81%AF%E5%92%8C%E6%8E%A7%E5%88%B6"><span class="toc-text">内核信息和控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3"><span class="toc-text">数据结构文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osVersion-t"><span class="toc-text">osVersion_t</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E6%96%87%E6%A1%A3"><span class="toc-text">枚举类型文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelState-t"><span class="toc-text">osKernelState_t</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%96%87%E6%A1%A3"><span class="toc-text">函数文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelInitialize"><span class="toc-text">osKernelInitialize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetInfo"><span class="toc-text">osKernelGetInfo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetState"><span class="toc-text">osKernelGetState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelStart"><span class="toc-text">osKernelStart</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelLock"><span class="toc-text">osKernelLock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelUnlock"><span class="toc-text">osKernelUnlock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelRestoreLock"><span class="toc-text">osKernelRestoreLock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelSuspend"><span class="toc-text">osKernelSuspend</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelResume"><span class="toc-text">osKernelResume</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetTickCount"><span class="toc-text">osKernelGetTickCount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetTickFreq"><span class="toc-text">osKernelGetTickFreq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetSysTimerCount"><span class="toc-text">osKernelGetSysTimerCount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetSysTimerFreq"><span class="toc-text">osKernelGetSysTimerFreq</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">线程管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%A0%87%E5%BF%97"><span class="toc-text">线程标志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%A0%87%E5%BF%97"><span class="toc-text">事件标志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%AD%89%E5%BE%85%E5%87%BD%E6%95%B0"><span class="toc-text">通用等待函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%AE%A1%E7%90%86"><span class="toc-text">定时器管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E6%96%A5%E7%AE%A1%E7%90%86"><span class="toc-text">互斥管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-text">信号量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%B1%A0"><span class="toc-text">内存池</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="toc-text">消息队列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-text">定义</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OS-Tick-API"><span class="toc-text">OS Tick API</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RTX-v5-Specific-API"><span class="toc-text">RTX v5 Specific API</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83"><span class="toc-text">相关参考</span></a></li></ol>
                </div>
            
            <hr />
            <h1 id="CMSIS-RTOS-API-v2"><a href="#CMSIS-RTOS-API-v2" class="headerlink" title="CMSIS-RTOS API v2"></a>CMSIS-RTOS API v2</h1><h2 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h2><p>有关内存管理可能性的信息。 </p>
<p>该CMSIS-RTOS API V2提供了内存管理，用户可以选择两个选项。对于对象存储，可以使用</p>
<ul>
<li>自动动态分配（完全可移植），或</li>
<li>手动用户定义分配（特定于实现）。</li>
</ul>
<p>为了影响内存分配方案，可以根据请求创建的所有 RTOS 对象，即那些具有osXxxNew函数的对象，在创建时接受可选osXxxAttr_t attr参数。根据经验，对象属性至少有成员来分配自定义控制块内存，即cb_mem和cb_size成员。默认情况下，即attrisNULL或cb_memis NULL，使用自动动态分配。在cb_mem切换到Manual User-defined Allocation 时提供指向用户内存的指针。</p>
<blockquote>
<p>笔记<br>    有关 RTX5 中提供的内存分配策略的详细信息，请参阅内存分配。</p>
</blockquote>
<h3 id="自动动态分配"><a href="#自动动态分配" class="headerlink" title="自动动态分配"></a>自动动态分配</h3><p>自动分配是许多用例的默认设置和可行的。此外，它完全可移植到CMSIS-RTOS API v2 的不同实现中。动态内存分配的共同缺点是内存碎片和耗尽的可能性。考虑到所有需要的对象在系统初始化时创建一次并且在运行时永远不会被删除，但是可以防止此类运行时故障。</p>
<p>实际使用的分配策略是特定于实现的，即是使用全局堆还是预分配的内存池。</p>
<p>代码示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cmsis_os2.h&quot;</span>                          <span class="comment">// implementation agnostic</span></span></span><br><span class="line">  </span><br><span class="line">osMutexId_t mutex_id;</span><br><span class="line">osMutexId_t mutex2_id;</span><br><span class="line">  </span><br><span class="line"><span class="type">const</span> osMutexAttr_t Thread_Mutex_attr = &#123;</span><br><span class="line">  <span class="string">&quot;myThreadMutex&quot;</span>,                              <span class="comment">// human readable mutex name</span></span><br><span class="line">  osMutexRecursive | osMutexPrioInherit,        <span class="comment">// attr_bits</span></span><br><span class="line">  <span class="literal">NULL</span>,                                         <span class="comment">// memory for control block (default)</span></span><br><span class="line">  <span class="number">0U</span>                                            <span class="comment">// size for control block (default)</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="type">void</span> <span class="title function_">CreateMutex</span> <span class="params">(<span class="type">void</span>)</span>  &#123;</span><br><span class="line">  mutex_id = osMutexNew(<span class="literal">NULL</span>);                  <span class="comment">// use default values for all attributes</span></span><br><span class="line">  mutex2_id = osMutexNew(&amp;Thread_Mutex_attr);   <span class="comment">// use attributes from defined structure</span></span><br><span class="line">  :</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本示例中的互斥体是使用自动内存分配创建的。</p>
<h3 id="手动用户定义分配"><a href="#手动用户定义分配" class="headerlink" title="手动用户定义分配"></a>手动用户定义分配</h3><p>通过提供用户定义的内存，可以对内存分配进行细粒度控制。此类用户定义内存的实际要求是特定于实现的。因此，需要仔细参考所用实现的大小和对齐规则，例如，对于 RTX，请参阅静态对象内存。</p>
<p>代码示例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;rtx_os.h&quot;</span>                             <span class="comment">// implementation specific</span></span></span><br><span class="line">  </span><br><span class="line">osMutexId_t mutex_id;</span><br><span class="line">  </span><br><span class="line"><span class="type">static</span> osRtxMutex_t mutex_cb __attribute__((section(<span class="string">&quot;.bss.os.mutex.cb&quot;</span>)));  <span class="comment">// Placed on .bss.os.mutex.cb section for RTX5 aware debugging</span></span><br><span class="line">  </span><br><span class="line"><span class="type">const</span> osMutexAttr_t Thread_Mutex_attr = &#123;</span><br><span class="line">  <span class="string">&quot;myThreadMutex&quot;</span>,                              <span class="comment">// human readable mutex name</span></span><br><span class="line">  osMutexRecursive | osMutexPrioInherit,        <span class="comment">// attr_bits</span></span><br><span class="line">  &amp;mutex_cb,                                    <span class="comment">// memory for control block (user-defined)</span></span><br><span class="line">  <span class="keyword">sizeof</span>(mutex_cb)                              <span class="comment">// size for control block (user-defined)</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="type">void</span> <span class="title function_">CreateMutex</span> <span class="params">(<span class="type">void</span>)</span>  &#123;</span><br><span class="line">  mutex_id = osMutexNew(&amp;Thread_Mutex_attr);    <span class="comment">// use attributes from defined structure</span></span><br><span class="line">  :</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的示例使用用户定义的内存作为互斥控制块。rtx_os.h在这种情况下，根据使用的实际实现需要包含特定的头文件。</p>
<h2 id="内核信息和控制"><a href="#内核信息和控制" class="headerlink" title="内核信息和控制"></a>内核信息和控制</h2><p>提供版本&#x2F;系统信息并启动&#x2F;控制 RTOS 内核。 </p>
<p><strong>数据结构</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">osVersion_t</span></span></span><br></pre></td></tr></table></figure>
<p>版本信息。 </p>
<p><strong>枚举</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span>  	<span class="title">osKernelState_t</span> &#123;</span></span><br><span class="line">        osKernelInactive = <span class="number">0</span>,</span><br><span class="line">        osKernelReady = <span class="number">1</span>,</span><br><span class="line">        osKernelRunning = <span class="number">2</span>,</span><br><span class="line">        osKernelLocked = <span class="number">3</span>,</span><br><span class="line">        osKernelSuspended = <span class="number">4</span>,</span><br><span class="line">        osKernelError = <span class="number">-1</span>,</span><br><span class="line">        osKernelReserved = <span class="number">0x7FFFFFFF</span></span><br><span class="line">        &#125;</span><br><span class="line">        Kernel state.</span><br></pre></td></tr></table></figure>

<p><strong>函数</strong></p>
<ul>
<li><p><code>osStatus_t     osKernelInitialize (void)</code><br>   初始化 RTOS 内核。</p>
</li>
<li><p><code>osStatus_t     osKernelGetInfo (osVersion_t *version, char *id_buf, uint32_t id_size)</code><br>   获取 RTOS 内核信息。</p>
</li>
<li><p><code>osKernelState_t     osKernelGetState (void)</code><br>   获取当前的 RTOS 内核状态。</p>
</li>
<li><p><code>osStatus_t     osKernelStart (void)</code><br>   启动 RTOS 内核调度程序。</p>
</li>
<li><p><code>int32_t     osKernelLock (void)</code><br>   锁定 RTOS 内核调度程序。</p>
</li>
<li><p><code>int32_t     osKernelUnlock (void)</code><br>   解锁 RTOS 内核调度程序。</p>
</li>
<li><p><code>int32_t     osKernelRestoreLock (int32_t lock)</code><br>   恢复 RTOS 内核调度程序锁定状态。</p>
</li>
<li><p><code>uint32_t     osKernelSuspend (void)</code><br>   暂停 RTOS 内核调度程序。</p>
</li>
<li><p><code>void     osKernelResume (uint32_t sleep_ticks)</code><br>   恢复 RTOS 内核调度程序。</p>
</li>
<li><p><code>uint32_t     osKernelGetTickCount (void)</code><br>   获取 RTOS 内核滴答计数。</p>
</li>
<li><p><code>uint32_t     osKernelGetTickFreq (void)</code><br>   获取 RTOS 内核滴答频率。</p>
</li>
<li><p><code>uint32_t     osKernelGetSysTimerCount (void)</code><br>   获取 RTOS 内核系统定时器计数。</p>
</li>
<li><p><code>uint32_t     osKernelGetSysTimerFreq (void)</code><br>   获取 RTOS 内核系统定时器频率。</p>
</li>
</ul>
<p><strong>描述</strong><br>内核信息和控制功能组允许：</p>
<ul>
<li>获取有关系统和底层内核的信息。</li>
<li>获取有关 CMSIS-RTOS API 的版本信息。</li>
<li>初始化 RTOS 内核以创建对象。</li>
<li>启动 RTOS 内核和线程切换。</li>
<li>检查 RTOS 内核的执行状态。</li>
</ul>
<blockquote>
<p>笔记<br>内核信息和控制函数不能从中断服务程序中调用。<br>RTX5 的内核初始化记录在System Startup 中。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * Application main thread</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">app_main</span> <span class="params">(<span class="type">void</span> *argument)</span> &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// System Initialization</span></span><br><span class="line">  SystemCoreClockUpdate();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"> </span><br><span class="line">  osKernelInitialize();                 <span class="comment">// Initialize CMSIS-RTOS</span></span><br><span class="line">  osThreadNew(app_main, <span class="literal">NULL</span>, <span class="literal">NULL</span>);    <span class="comment">// Create application main thread</span></span><br><span class="line">  osKernelStart();                      <span class="comment">// Start thread execution</span></span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数据结构文档"><a href="#数据结构文档" class="headerlink" title="数据结构文档"></a>数据结构文档</h3><h4 id="osVersion-t"><a href="#osVersion-t" class="headerlink" title="osVersion_t"></a>osVersion_t</h4><p><code>struct osVersion_t</code><br>标识底层 RTOS 内核和 API 版本号。版本以组合十进制数表示，格式为：major.minor.rev: mmnnnrrrr</p>
<p>使用osKernelGetInfo检索版本号。</p>
<table>
    <tr height=50 align="left">
        <td colspan="3">数据字段</td>
    </tr >
    <tr align="left">
        <td>uint32_t</td> 
        <td>api</td> 
        <td>API 版本（major.minor.rev：mmnnnrrrr dec）</td> 
    </tr>
    <tr align="left">
        <td>uint32_t</td> 
        <td>kernel</td> 
        <td>内核版本（major.minor.rev：mmnnnrrrr dec）</td> 
    </tr>
</table>

<h3 id="枚举类型文档"><a href="#枚举类型文档" class="headerlink" title="枚举类型文档"></a>枚举类型文档</h3><h4 id="osKernelState-t"><a href="#osKernelState-t" class="headerlink" title="osKernelState_t"></a>osKernelState_t</h4><p><code>enum osKernelState_t</code><br>由osKernelGetState检索到的内核状态。如果osKernelGetState失败或从 ISR 调用它，它将返回osKernelError，否则返回内核状态。</p>
<table>
    <tr height=50 align="left">
        <td colspan="3">枚举器</td>
    </tr >
    <tr align="left">
        <td>osKernelInactive </td> 
        <td>不活动。内核还没有准备好。osKernelInitialize需要成功执行。</td> 
    </tr>
    <tr align="left">
        <td>osKernelReady </td> 
        <td>就绪。内核尚未运行。osKernelStart将内核转移到运行状态。</td> 
    </tr>
    <tr align="left">
        <td>osKernelRunning  </td> 
        <td>运行。内核已初始化并运行。</td> 
    </tr>
    <tr align="left">
        <td>osKernelLocked   </td> 
        <td>锁定。内核被osKernelLock锁定。函数osKernelUnlock或osKernelRestoreLock解锁它。</td> 
    </tr>
    <tr align="left">
        <td>osKernelSuspended    </td> 
        <td>暂停。使用osKernelSuspend暂停内核。函数osKernelResume返回正常操作。</td> 
    </tr>
    <tr align="left">
        <td>osKernelError    </td> 
        <td>错误。发生错误。</td> 
    </tr>
    <tr align="left">
        <td>osKernelReserved     </td> 
        <td>防止枚举缩小编译器优化。预留的。</td> 
    </tr>
</table>

<h3 id="函数文档"><a href="#函数文档" class="headerlink" title="函数文档"></a>函数文档</h3><h4 id="osKernelInitialize"><a href="#osKernelInitialize" class="headerlink" title="osKernelInitialize"></a>osKernelInitialize</h4><p><code>osStatus_t osKernelInitialize    (void )</code><br><strong>返回值</strong><br>指示函数执行状态的状态码。</p>
<p>函数osKernelInitialize初始化 RTOS 内核。在成功执行之前，只能调用函数osKernelGetInfo和osKernelGetState。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osOK ： 如果成功。</li>
<li>osError ： 如果发生非特定错误。</li>
<li>osErrorISR ： 如果从中断服务程序调用。</li>
<li>osErrorNoMemory ： 如果无法为操作保留内存。</li>
</ul>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;RTE_Components.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span>  CMSIS_device_header</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cmsis_os2.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"> * Application main thread</span></span><br><span class="line"><span class="comment"> *---------------------------------------------------------------------------*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">app_main</span> <span class="params">(<span class="type">void</span> *argument)</span> &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// System Initialization</span></span><br><span class="line">  SystemCoreClockUpdate();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"> </span><br><span class="line">  osKernelInitialize();                 <span class="comment">// Initialize CMSIS-RTOS</span></span><br><span class="line">  osThreadNew(app_main, <span class="literal">NULL</span>, <span class="literal">NULL</span>);    <span class="comment">// Create application main thread</span></span><br><span class="line">  osKernelStart();                      <span class="comment">// Start thread execution</span></span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelGetInfo"><a href="#osKernelGetInfo" class="headerlink" title="osKernelGetInfo"></a>osKernelGetInfo</h4><p><code>osStatus_t osKernelGetInfo    (    osVersion_t *     version, char *     id_buf, uint32_t     id_size )</code><br><strong>参数</strong></p>
<ul>
<li>[out]    version<br>指向用于检索版本信息的缓冲区的指针</li>
<li>[out]    id_buf<br>指向用于检索内核标识字符串的缓冲区的指针。</li>
<li>[in]    id_size<br>内核标识字符串的缓冲区大小。</li>
</ul>
<p><strong>返回值</strong><br>指示函数执行状态的状态码。</p>
<p>函数osKernelGetInfo检索底层 RTOS 内核的 API 和内核版本以及内核的人类可读标识符字符串。它可以在 RTOS 初始化或启动之前安全地调用（调用osKernelInitialize或osKernelStart）。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osOK如果成功。</li>
<li>osError如果发生非特定错误。</li>
</ul>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">info</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="type">char</span> infobuf[<span class="number">100</span>];</span><br><span class="line">  osVersion_t osv;</span><br><span class="line">  osStatus_t status;</span><br><span class="line"> </span><br><span class="line">  status = osKernelGetInfo(&amp;osv, infobuf, <span class="keyword">sizeof</span>(infobuf));</span><br><span class="line">  <span class="keyword">if</span>(status == osOK) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Kernel Information: %s\r\n&quot;</span>, infobuf);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Kernel Version    : %d\r\n&quot;</span>, osv.kernel);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Kernel API Version: %d\r\n&quot;</span>, osv.api);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelGetState"><a href="#osKernelGetState" class="headerlink" title="osKernelGetState"></a>osKernelGetState</h4><p><code>osKernelState_t osKernelGetState    (    void         )    </code></p>
<p><strong>返回值</strong><br>当前 RTOS 内核状态。</p>
<p>函数osKernelGetState返回内核的当前状态，并且可以在 RTOS 初始化或启动之前安全地调用（调用osKernelInitialize或osKernelStart）。如果失败，它将返回osKernelError，否则返回内核状态（请参阅osKernelState_t以获取内核状态列表）。</p>
<p>可能的osKernelState_t返回值：</p>
<ul>
<li>osKernelError如果发生非特定错误。</li>
<li>否则为实际内核状态。</li>
</ul>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// System Initialization</span></span><br><span class="line">  SystemCoreClockUpdate();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span>(osKernelGetState() == osKernelInactive) &#123;     <span class="comment">// Is the kernel initialized?</span></span><br><span class="line">     osKernelInitialize();                         <span class="comment">// Initialize CMSIS-RTOS kernel</span></span><br><span class="line">  &#125;</span><br><span class="line">  ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelStart"><a href="#osKernelStart" class="headerlink" title="osKernelStart"></a>osKernelStart</h4><p><code>osStatus_t osKernelStart    (    void         )</code></p>
<p><strong>返回值</strong><br>指示函数执行状态的状态码。<br>函数osKernelStart启动 RTOS 内核并开始线程切换。如果成功，它不会返回到它的调用函数。在成功执行之前，只能调用函数osKernelGetInfo、osKernelGetState和对象创建函数（osXxxNew）。</p>
<p>至少应在 osKernelStart 之前创建一个初始线程，请参阅osThreadNew。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osError如果发生非特定错误。</li>
<li>osErrorISR如果从中断服务程序调用。</li>
</ul>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="comment">// System Initialization</span></span><br><span class="line">  SystemCoreClockUpdate();</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">if</span>(osKernelGetState() == osKernelInactive) &#123;</span><br><span class="line">    osKernelInitialize();</span><br><span class="line">  &#125;</span><br><span class="line">  ; <span class="comment">// ... Start Threads</span></span><br><span class="line">  <span class="keyword">if</span> (osKernelGetState() == osKernelReady) &#123;        <span class="comment">// If kernel is ready to run...</span></span><br><span class="line">    osKernelStart();                                <span class="comment">// ... start thread execution</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>);                                         <span class="comment">// only reached in case of error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelLock"><a href="#osKernelLock" class="headerlink" title="osKernelLock"></a>osKernelLock</h4><p><code>int32_t osKernelLock    (    void         )    </code></p>
<p><strong>返回值</strong><br>先前的锁定状态（1 - 锁定，0 - 未锁定，如果为负则为错误代码）。<br>函数osKernelLock允许锁定所有任务开关。它返回锁定状态的先前值（如果已锁定则为1，如果已解锁则为0），否则返回表示错误代码的负数（请参阅osStatus_t）。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osError如果发生非特定错误。</li>
<li>osErrorISR如果从中断服务程序调用。</li>
</ul>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int32_t</span> state = osKernelLock();</span><br><span class="line"><span class="comment">// ... critical code</span></span><br><span class="line">osKernelRestore(state);</span><br></pre></td></tr></table></figure>

<h4 id="osKernelUnlock"><a href="#osKernelUnlock" class="headerlink" title="osKernelUnlock"></a>osKernelUnlock</h4><p><code>int32_t osKernelUnlock    (    void         )</code></p>
<p><strong>返回值</strong><br>先前的锁定状态（1 - 锁定，0 - 未锁定，如果为负则为错误代码）。<br>函数osKernelLock允许锁定所有任务开关。它返回锁定状态的先前值（如果已锁定则为1，如果已解锁则为0），否则返回表示错误代码的负数（请参阅osStatus_t）。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osError如果发生非特定错误。</li>
<li>osErrorISR如果从中断服务程序调用。</li>
</ul>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int32_t</span> sl = osKernelLock();</span><br><span class="line"><span class="comment">// ... critical code</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int32_t</span> su = osKernelUnlock();</span><br><span class="line">  <span class="comment">// ... uncritical code</span></span><br><span class="line">  osKernelRestoreLock(su);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ... critical code</span></span><br><span class="line">osKernelRestoreLock(sl);</span><br></pre></td></tr></table></figure>

<h4 id="osKernelRestoreLock"><a href="#osKernelRestoreLock" class="headerlink" title="osKernelRestoreLock"></a>osKernelRestoreLock</h4><p><code>int32_t osKernelRestoreLock    (    int32_t     lock    )</code></p>
<p><strong>参数</strong><br>[in]    lock<br>由osKernelLock或osKernelUnlock获得的锁状态。</p>
<p><strong>返回值</strong><br>新的锁定状态（1 - 锁定，0 - 未锁定，如果为负则为错误代码）。<br>函数osKernelRestoreLock在osKernelLock或osKernelUnlock之后恢复先前的锁定状态。</p>
<p>参数lock指定由osKernelLock或osKernelUnlock获得的锁定状态。</p>
<p>该函数返回锁定状态的新值（如果已锁定则为1，如果已解锁则为0），否则返回表示错误代码的负数（请参阅osStatus_t）。</p>
<p>可能的osStatus_t返回值：</p>
<ul>
<li>osError如果发生非特定错误。</li>
<li>osErrorISR如果从中断服务程序调用。</li>
</ul>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int32_t</span> sl = osKernelLock();</span><br><span class="line"><span class="comment">// ... critical code</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int32_t</span> su = osKernelUnlock();</span><br><span class="line">  <span class="comment">// ... uncritical code</span></span><br><span class="line">  osKernelRestoreLock(su);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ... critical code</span></span><br><span class="line">osKernelRestoreLock(sl);</span><br></pre></td></tr></table></figure>

<h4 id="osKernelSuspend"><a href="#osKernelSuspend" class="headerlink" title="osKernelSuspend"></a>osKernelSuspend</h4><p><code>uint32_t osKernelSuspend    (    void         )    </code></p>
<p><strong>返回值</strong><br>以滴答为单位的时间，系统可以休眠或断电的时间。<br>CMSIS-RTOS 提供了无滴答操作的扩展，这对于使用大量低功耗模式的应用程序非常有用，其中 SysTick 定时器也被禁用。为了在这种省电模式下提供时间滴答，使用唤醒定时器来导出定时器间隔。函数osKernelSuspend挂起 RTX 内核调度程序，从而启用睡眠模式。</p>
<p>返回值可用于确定系统滴答的数量，直到下一个基于滴答的内核事件将发生，即延迟线程再次准备就绪。建议设置低功耗定时器，根据该返回值产生唤醒中断。</p>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">osRtxIdleThread</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">                                               <span class="comment">/* The idle thread is running</span></span><br><span class="line"><span class="comment">                                                  when no other thread is ready</span></span><br><span class="line"><span class="comment">                                                  to run.                      */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> sleep;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                                               <span class="comment">/* HERE: include optional user</span></span><br><span class="line"><span class="comment">                                                  code to be executed when no</span></span><br><span class="line"><span class="comment">                                                  task runs.                   */</span></span><br><span class="line">    sleep = osKernelSuspend();                 <span class="comment">/* Suspend RTX thread scheduler */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (sleep) &#123;                               <span class="comment">/* How long can we sleep?       */</span></span><br><span class="line">                                               <span class="comment">/* &quot;sleep&quot; is in RTX Timer Ticks</span></span><br><span class="line"><span class="comment">                                                  which is 1ms in this</span></span><br><span class="line"><span class="comment">                                                  configuration                */</span></span><br><span class="line">       </span><br><span class="line">                                               <span class="comment">/* Setup wake-up e.g. watchdog  */</span></span><br><span class="line"> </span><br><span class="line">      __WFE();                                 <span class="comment">/* Enter Power-down mode        */</span></span><br><span class="line">      </span><br><span class="line">                                               <span class="comment">/* After Wake-up                */</span></span><br><span class="line">      sleep = tc;                              <span class="comment">/* Adjust with cycles slept     */</span>  </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    osKernelResume(sleep);                     <span class="comment">/* Resume thread scheduler      */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelResume"><a href="#osKernelResume" class="headerlink" title="osKernelResume"></a>osKernelResume</h4><p><code>void osKernelResume    (    uint32_t     sleep_ticks    )</code></p>
<p><strong>参数</strong><br>[in]    sleep_ticks<br>系统处于睡眠或断电模式的时间（以滴答为单位）。</p>
<p>CMSIS-RTOS 提供了无滴答操作的扩展，这对于使用大量低功耗模式的应用程序非常有用，其中 SysTick 定时器也被禁用。为了在这种省电模式下提供时间滴答，使用唤醒定时器来导出定时器间隔。函数osKernelResume启用 RTX 内核调度程序，从而将系统从睡眠模式唤醒。</p>
<blockquote>
<p>笔记<br>不能从中断服务程序中调用此函数。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">osRtxIdleThread</span> <span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">                                               <span class="comment">/* The idle thread is running</span></span><br><span class="line"><span class="comment">                                                  when no other thread is ready</span></span><br><span class="line"><span class="comment">                                                  to run.                      */</span></span><br><span class="line">  <span class="type">unsigned</span> <span class="type">int</span> sleep;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                                               <span class="comment">/* HERE: include optional user</span></span><br><span class="line"><span class="comment">                                                  code to be executed when no</span></span><br><span class="line"><span class="comment">                                                  task runs.                   */</span></span><br><span class="line">    sleep = osKernelSuspend();                 <span class="comment">/* Suspend RTX thread scheduler */</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (sleep) &#123;                               <span class="comment">/* How long can we sleep?       */</span></span><br><span class="line">                                               <span class="comment">/* &quot;sleep&quot; is in RTX Timer Ticks</span></span><br><span class="line"><span class="comment">                                                  which is 1ms in this</span></span><br><span class="line"><span class="comment">                                                  configuration                */</span></span><br><span class="line">       </span><br><span class="line">                                               <span class="comment">/* Setup wake-up e.g. watchdog  */</span></span><br><span class="line"> </span><br><span class="line">      __WFE();                                 <span class="comment">/* Enter Power-down mode        */</span></span><br><span class="line">      </span><br><span class="line">                                               <span class="comment">/* After Wake-up                */</span></span><br><span class="line">      sleep = tc;                              <span class="comment">/* Adjust with cycles slept     */</span>  </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    osKernelResume(sleep);                     <span class="comment">/* Resume thread scheduler      */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelGetTickCount"><a href="#osKernelGetTickCount" class="headerlink" title="osKernelGetTickCount"></a>osKernelGetTickCount</h4><p><code>uint32_t osKernelGetTickCount    (    void         )</code></p>
<p><strong>返回值</strong><br>RTOS 内核当前滴答计数。<br>函数osKernelGetTickCount返回当前的 RTOS 内核滴答计数。</p>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cmsis_os2.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">Thread_1</span> <span class="params">(<span class="type">void</span> *arg)</span>  &#123;                <span class="comment">// Thread function</span></span><br><span class="line">  <span class="type">uint32_t</span> tick;</span><br><span class="line">  tick = osKernelGetTickCount();            <span class="comment">// retrieve the number of system ticks</span></span><br><span class="line">  <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">    tick += <span class="number">1000</span>;                           <span class="comment">// delay 1000 ticks periodically</span></span><br><span class="line">    osDelayUntil(tick);</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于用于滴答计数的值范围有限，它可能会在运行时溢出，即在大约 49 天 @ 1 毫秒的2 32滴答之后。通常，除非需要单调计数器，否则不必特别注意这一点。对于这种情况，可以按如下方式实现额外的 64 位滴答计数器。给定的示例需要每次刻度溢出至少调用两次 GetTick() 才能正常工作。</p>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">uint64_t</span> <span class="title function_">GetTick</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">  <span class="type">static</span> <span class="type">uint32_t</span> tick_h = <span class="number">0U</span>;</span><br><span class="line">  <span class="type">static</span> <span class="type">uint32_t</span> tick_l = <span class="number">0U</span>;</span><br><span class="line">         <span class="type">uint32_t</span> tick;</span><br><span class="line">  tick = osKernelGetTickCount();</span><br><span class="line">  <span class="keyword">if</span> (tick &lt; tick_l) &#123;</span><br><span class="line">    tick_h++;</span><br><span class="line">  &#125;</span><br><span class="line">  tick_l = tick;</span><br><span class="line">  <span class="keyword">return</span> (((<span class="type">uint64_t</span>)tick_h &lt;&lt; <span class="number">32</span>) | tick_l);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelGetTickFreq"><a href="#osKernelGetTickFreq" class="headerlink" title="osKernelGetTickFreq"></a>osKernelGetTickFreq</h4><p><code>uint32_t osKernelGetTickFreq    (    void         )    </code></p>
<p><strong>返回值</strong><br>以赫兹为单位的内核滴答频率，即每秒内核滴答数。<br>函数osKernelGetTickFreq返回当前 RTOS 内核滴答的频率。</p>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<h4 id="osKernelGetSysTimerCount"><a href="#osKernelGetSysTimerCount" class="headerlink" title="osKernelGetSysTimerCount"></a>osKernelGetSysTimerCount</h4><p><code>uint32_t osKernelGetSysTimerCount    (    void         )    </code>    </p>
<p><strong>返回值</strong><br>RTOS 内核当前系统定时器计数为 32 位值。<br>函数osKernelGetSysTimerCount以 32 位值的形式返回当前的 RTOS 内核系统定时器。该值是一个滚动的 32 位计数器，由内核系统中断计时器值和对这些中断（RTOS 内核滴答）计数的计数器组成。</p>
<p>此函数允许在 RTOS 滴答粒度下实现非常短的超时检查。在检查设备或外设初始化例程中的繁忙状态时，可能需要进行此类检查，请参见下面的代码示例。</p>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<p><strong>代码示例</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;cmsis_os2.h&quot;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">void</span> <span class="title function_">SetupDevice</span> <span class="params">(<span class="type">void</span>)</span>  &#123;</span><br><span class="line">  <span class="type">uint32_t</span> tick;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// Calculating 100us timeout in system timer ticks</span></span><br><span class="line">  <span class="type">const</span> <span class="type">uint32_t</span> timeout = <span class="number">100U</span> * osKernelGetSysTimerFreq() / <span class="number">1000000u</span>;</span><br><span class="line">  </span><br><span class="line">  tick = osKernelGetSysTimerCount();             <span class="comment">// get start value of the Kernel system tick</span></span><br><span class="line">  Device.Setup ();                               <span class="comment">// initialize a device or peripheral</span></span><br><span class="line">  <span class="keyword">do</span> &#123;                                           <span class="comment">// poll device busy status for 100 microseconds</span></span><br><span class="line">    <span class="keyword">if</span> (!Device.Busy) <span class="keyword">break</span>;                     <span class="comment">// check if device is correctly initialized</span></span><br><span class="line">  &#125; <span class="keyword">while</span> ((osKernelGetSysTimerCount() - tick) &lt; timeout));</span><br><span class="line">  <span class="keyword">if</span> (Device.Busy)  &#123;              </span><br><span class="line">    ;                                            <span class="comment">// in case device still busy, signal error</span></span><br><span class="line">  &#125;</span><br><span class="line">                                                 <span class="comment">// start interacting with device</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="osKernelGetSysTimerFreq"><a href="#osKernelGetSysTimerFreq" class="headerlink" title="osKernelGetSysTimerFreq"></a>osKernelGetSysTimerFreq</h4><p><code>uint32_t osKernelGetSysTimerFreq    (    void         )</code><br><strong>返回值</strong><br>系统计时器的频率（以赫兹为单位），即计时器每秒滴答数。<br>函数osKernelGetSysTimerFreq返回当前 RTOS 内核系统定时器的频率。</p>
<blockquote>
<p>笔记<br>这个函数可以从中断服务程序中调用。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">一边阅读，一边翻译整理，为了日后当成手册查阅起来方便些、清晰些。。。</span><br><span class="line">但是刚刚找了一下，发现已经有大佬翻译了。。。</span><br><span class="line">其实很多都是通用的，了解一下，后面项目能用就行，还是节约点时间去看freertos源码。。。</span><br></pre></td></tr></table></figure>

<h2 id="线程管理"><a href="#线程管理" class="headerlink" title="线程管理"></a>线程管理</h2><p>定义、创建和控制线程函数。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80138793">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 线程管理）</a></p>
<h2 id="线程标志"><a href="#线程标志" class="headerlink" title="线程标志"></a>线程标志</h2><p>使用标志同步线程。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80155038">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 线程标志）</a></p>
<h2 id="事件标志"><a href="#事件标志" class="headerlink" title="事件标志"></a>事件标志</h2><p>使用事件标志同步线程。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80158596">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 事件标志）</a></p>
<h2 id="通用等待函数"><a href="#通用等待函数" class="headerlink" title="通用等待函数"></a>通用等待函数</h2><p>等待一段时间。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80159402">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 通用等待函数）</a></p>
<h2 id="定时器管理"><a href="#定时器管理" class="headerlink" title="定时器管理"></a>定时器管理</h2><p>创建和控制定时器和定时器回调函数。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80159681">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 定时器管理）</a></p>
<h2 id="互斥管理"><a href="#互斥管理" class="headerlink" title="互斥管理"></a>互斥管理</h2><p>使用互斥 (Mutex) 同步资源访问。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80160569">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 互斥锁管理）</a></p>
<h2 id="信号量"><a href="#信号量" class="headerlink" title="信号量"></a>信号量</h2><p>从不同的线程同时访问共享资源。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80172761">https://blog.csdn.net/u012325601/article/details/80172761</a></p>
<h2 id="内存池"><a href="#内存池" class="headerlink" title="内存池"></a>内存池</h2><p>管理线程安全的固定大小的动态内存块。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80188700">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 内存池）</a></p>
<h2 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h2><p>在类似 FIFO 的操作中的线程之间交换消息。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80200146">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 消息队列）</a></p>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>许多 CMSIS-RTOS 函数使用的常量和枚举。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80205167">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 定义）</a></p>
<h1 id="OS-Tick-API"><a href="#OS-Tick-API" class="headerlink" title="OS Tick API"></a>OS Tick API</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/article/details/80206194">CMSIS-RTOS2 文档翻译 之 参考（CMSIS-RTOS2 API 之 OS Tick API）</a></p>
<h1 id="RTX-v5-Specific-API"><a href="#RTX-v5-Specific-API" class="headerlink" title="RTX v5 Specific API"></a>RTX v5 Specific API</h1><p>。。。。。</p>
<h1 id="相关参考"><a href="#相关参考" class="headerlink" title="相关参考"></a>相关参考</h1><p>1、<a target="_blank" rel="noopener" href="https://arm-software.github.io/CMSIS_5/RTOS2/html/modules.html">CMSIS_RTOS2_API</a><br>2、<a target="_blank" rel="noopener" href="https://blog.csdn.net/u012325601/category_9274156.html">CMSIS-RTOS2 文档翻译</a></p>
<p>That’s all.Check it.</p>

        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                    <a class="donate" href="javascript:;"><i class="fa fa-bitcoin"></i> 打赏</a>
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "https://zhekunren.github.io/archives/9c7b2d17.html",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "https://zhekunren.github.io/archives/9c7b2d17.html";
            const title         = "「RTX_RTOS之02-CMSIS_RTOS2_Reference自译中文版」";
            const excerpt       = ``;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/RTOS/" rel="tag">RTOS</a>, <a class="tag-none-link" href="/tags/RTX/" rel="tag">RTX</a>
                </div>
                <div class="pull-date">
                <span>最后编辑：2022-01-23</span>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" RTX_RTOS之01-CMSIS_RTOS2_Tutorial自译中文版" href="/archives/3b27166f.html">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" 【STM32】STM32CubeMX HAL库 DMA[1]初探" href="/archives/1d6f82e9.html">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
        <div id="disqus_thread" class="post-comments lazy-load"></div>

<script>
    var disqus_config = function () {
        this.page.url = 'https://zhekunren.github.io/archives/9c7b2d17.html';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'archives/9c7b2d17.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    var load_comm = () => {
        if (typeof DISQUS === 'undefined') {
            var d = document, s = d.createElement('script');
            s.src = 'https://zhekunblog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        } else {
            DISQUS.reset({
                reload: true,
                config: function () {  
                    this.page.url = 'https://zhekunren.github.io/archives/9c7b2d17.html';  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = 'archives/9c7b2d17.html'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                }
            });
        }
    };
    
</script>
<script async id="dsq-count-scr" src="//zhekunblog.disqus.com/count.js"></script>

<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <!-- <div class="photo-background"></div> --> <!-- 删除头像处banner图片，将这行代码替换成下一行 delete by zhekun-->
    <div style="height: 75px;"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="https://cdn.jsdelivr.net/gh/zhekunren/blog_image/img/theme/avatar2.jpg" />
        </div>
    </div>
    <!-- <div class="textwidget">
        <p class="text-center">与其向往，不如出发</p> 
    </div> -->
    <!-- 重定义about界面，将这行代码替换成下一行 delete by zhekun-->
    <div><p style="margin-top:10px;margin-bottom:0;text-align:center;font-weight:400;font-size:25px;line-height:1.5;">zhekunのblog</p><p style="margin-top:0;margin-bottom:0;text-align:center;font-size:15px;line-height:1.5;">与其向往，不如出发</p><p style="margin-top:0;margin-bottom:0;text-align:center;font-size:15px;line-height:1.5;"><i class="fa fa-map-marker"></i><span>中国●四川</span></p></div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                54
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                12
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                23
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix">
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar"></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CMSIS-RTOS-API-v2"><span class="toc-text">CMSIS-RTOS API v2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-text">内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8A%A8%E6%80%81%E5%88%86%E9%85%8D"><span class="toc-text">自动动态分配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E7%94%A8%E6%88%B7%E5%AE%9A%E4%B9%89%E5%88%86%E9%85%8D"><span class="toc-text">手动用户定义分配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E4%BF%A1%E6%81%AF%E5%92%8C%E6%8E%A7%E5%88%B6"><span class="toc-text">内核信息和控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%96%87%E6%A1%A3"><span class="toc-text">数据结构文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osVersion-t"><span class="toc-text">osVersion_t</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E6%96%87%E6%A1%A3"><span class="toc-text">枚举类型文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelState-t"><span class="toc-text">osKernelState_t</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%96%87%E6%A1%A3"><span class="toc-text">函数文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelInitialize"><span class="toc-text">osKernelInitialize</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetInfo"><span class="toc-text">osKernelGetInfo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetState"><span class="toc-text">osKernelGetState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelStart"><span class="toc-text">osKernelStart</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelLock"><span class="toc-text">osKernelLock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelUnlock"><span class="toc-text">osKernelUnlock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelRestoreLock"><span class="toc-text">osKernelRestoreLock</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelSuspend"><span class="toc-text">osKernelSuspend</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelResume"><span class="toc-text">osKernelResume</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetTickCount"><span class="toc-text">osKernelGetTickCount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetTickFreq"><span class="toc-text">osKernelGetTickFreq</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetSysTimerCount"><span class="toc-text">osKernelGetSysTimerCount</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#osKernelGetSysTimerFreq"><span class="toc-text">osKernelGetSysTimerFreq</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="toc-text">线程管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E6%A0%87%E5%BF%97"><span class="toc-text">线程标志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%A0%87%E5%BF%97"><span class="toc-text">事件标志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E7%AD%89%E5%BE%85%E5%87%BD%E6%95%B0"><span class="toc-text">通用等待函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%AE%A1%E7%90%86"><span class="toc-text">定时器管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E6%96%A5%E7%AE%A1%E7%90%86"><span class="toc-text">互斥管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-text">信号量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%B1%A0"><span class="toc-text">内存池</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="toc-text">消息队列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-text">定义</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#OS-Tick-API"><span class="toc-text">OS Tick API</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RTX-v5-Specific-API"><span class="toc-text">RTX v5 Specific API</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%8F%82%E8%80%83"><span class="toc-text">相关参考</span></a></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/EOS-RTOS/">EOS-RTOS</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/EOS-RTOS/FreeRTOS/">FreeRTOS</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/EOS-RTOS/RTX/">RTX</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91/">嵌入式开发</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E7%A7%AF%E7%B4%AF/">技术积累</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B1%82%E8%81%8C%E7%AC%94%E8%AE%B0/">求职笔记</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E6%97%A5%E5%B8%B8/">生活日常</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E6%97%A5%E5%B8%B8/%E5%BD%B1%E9%9F%B3%E7%BE%8E%E5%9B%BE/">影音美图</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/">软件工具</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/Hexo/">Hexo</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/%E5%AE%89%E8%A3%85%E7%A0%B4%E8%A7%A3/">安装破解</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">实用工具</a><span class="category-list-count">1</span></li></ul></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/C-Cpp/" style="font-size: 0.63em;">C&Cpp</a> <a href="/tags/DMA/" style="font-size: 0.66em;">DMA</a> <a href="/tags/FIFO/" style="font-size: 0.63em;">FIFO</a> <a href="/tags/FreeRTOS/" style="font-size: 0.77em;">FreeRTOS</a> <a href="/tags/MathType/" style="font-size: 0.6em;">MathType</a> <a href="/tags/Matlab/" style="font-size: 0.6em;">Matlab</a> <a href="/tags/Mysql/" style="font-size: 0.6em;">Mysql</a> <a href="/tags/QT/" style="font-size: 0.6em;">QT</a> <a href="/tags/RTOS/" style="font-size: 0.8em;">RTOS</a> <a href="/tags/RTX/" style="font-size: 0.66em;">RTX</a> <a href="/tags/XMind/" style="font-size: 0.6em;">XMind</a> <a href="/tags/blog-test/" style="font-size: 0.71em;">blog-test</a> <a href="/tags/blog-tips/" style="font-size: 0.66em;">blog-tips</a> <a href="/tags/hexo/" style="font-size: 0.74em;">hexo</a> <a href="/tags/install/" style="font-size: 0.69em;">install</a> <a href="/tags/life/" style="font-size: 0.63em;">life</a> <a href="/tags/movies/" style="font-size: 0.63em;">movies</a> <a href="/tags/muisc/" style="font-size: 0.6em;">muisc</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/archives/4fd3c7f0.html"><i class="fa  fa-book"></i> Mysql安装与基础使用（QT、Matlab）</a>
            
          
        
          
          
            <a class="list-group-item" href="/archives/e1e589cc.html"><i class="fa  fa-book"></i> 求职笔记--专栏索引</a>
            
          
        
          
          
        
          
          
            <a class="list-group-item" href="/archives/428d3437.html"><i class="fa  fa-book"></i> Hexo blog custom record</a>
            
          
        
          
          
            <a class="list-group-item" href="/archives/c4a4928.html"><i class="fa  fa-book"></i> 常用在线工具（不定期更新）</a>
            
          
        
          
          
            <a class="list-group-item" href="/archives/fb0c4ff4.html"><i class="fa  fa-book"></i> 影音美图畅享（不定期更新）</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        <li><a title="mail" href="mailto:zhekunren@qq.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        
                        
                        
                        <li><a title="github" target="_blank" rel="nofollow" href="https://github.com/zhekunren"><i class="fa fa-github"></i></a></li>
                        <li><a title="gitee" target="_blank" rel="nofollow" href="https://gitee.com/zhekunren"><i class="fa fa-github-alt"></i></a></li>
                        <li><a title="rss" target="_blank" rel="nofollow" href="/atom.xml"><i class="fa fa-rss"></i></a></li>
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2022 zhekunのblog 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <!-- <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by zhekun.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div> -->
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://unpkg.com/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>

    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.min.js"></script>
    </div>


    <script async src="/js/candy.min.js"></script>



    <script defer src="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="https://unpkg.com/meting@2/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="7230595307"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://unpkg.com/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>

    <script defer src="https://unpkg.com/layui-src@2.5.5/dist/layui.all.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>


<script type="text/javascript">document.write(unescape("%3Cspan style='display:none;' id='cnzz_stat_icon_1280860084'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1280860084' type='text/javascript'%3E%3C/script%3E"));</script>

<!-- Extra support for third-party plguins  -->


    </body>
</html>